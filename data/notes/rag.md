# RAG Study Notes

## 파이프라인 개요
- 소스: JD/프로필/이력서/자소서/노트(MDX/MD/JSON).
- 청킹: 문단/리스트 단위, 200~400 토큰 기준. 파일 경로/제목 메타 포함.
- 임베딩: 로컬(예: gte-small) 또는 호스티드. 벡터 DB: faiss/sqlite+pgvector/Supabase.
- 검색: 하이브리드(벡터 Top-K + BM25). 점수 재랭킹(Optional).
- 프롬프트: 컨텍스트 + “자료에 없으면 모른다고 답”. 자리표시자 유지 지침.

## 청킹/인덱싱 메모
- 파일 경로/섹션 헤더를 메타로 저장 → 답변에 출처 표기 가능.
- MDX 코드블록/Frontmatter는 제외하거나 별도 필드.
- PII 마스킹: 전화/이메일 등은 인덱싱 전 제거/토큰화.

## 검색 전략
- K=4~8, 하이브리드 시 가중치 튜닝(예: bm25 0.3, vector 0.7).
- 쿼리 확장: 필요 시 synonyms/키워드 추가(“React Query”↔“RQ”, “캐싱”).
- 윈도: 컨텍스트 길이 1~2k 토큰 이하 유지, 중복 컨텍스트 제거.

## 프롬프트 스켈레톤
```
질문: {q}
컨텍스트:
1) {snippet1}
2) {snippet2}
지침:
- 컨텍스트에 기반해 답변. 없으면 "자료에 없음"이라고 답.
- 자리표시자/변수 명은 변경하지 말 것.
- 민감정보는 노출하지 말 것.
```

## 안전/프라이버시
- PII 제거, `.env` 경로 제외, 경로 화이트리스트.
- 로그에 원문 저장 금지 또는 보존 기간 제한.
- 레이트리밋/인증: 공개 챗이면 IP/토큰 기반 제한.

## 오픈 이슈
- 임베딩 모델 선택(품질 vs 비용), 언어 혼합 시 성능.
- 증거 기반 답변을 강제하는 프롬프트/체커.
- 장기 컨텍스트 대비 청크 크기 조정/요약 결합.
