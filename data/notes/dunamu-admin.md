# 두나무 운영/어드민 글감 초안

## 1) RBAC·감사로그 설계
- 요구: 업비트급 운영툴은 역할/권한 가드와 모든 변경의 감사로그가 필수.
- 포인트: 리소스 단위 RBAC(메뉴/액션/필드) → 프론트 가드(HOC/라우터 가드) + 서버 검증 이중화.
- 감사로그: 누가/언제/무엇을/어떻게 변경했는지, 이전값/이후값, 위험 액션은 사전 확인(이중 확인/OTP).
- UI: “이 액션은 감사로그에 남습니다” 표시, 위험 액션은 모달/토스트와 함께 근거 남기기.

## 2) 운영 UX 컴포넌트 패턴
- 대량 테이블: 컬럼 가상화, 서버 필터/소트, 배치 액션(승인/삭제/엑스포트).
- 필터/폼: 필드 권한에 따라 disable/숨김, 즉시 검증(react-hook-form + zod), 에러 가이드 템플릿화.
- 위험 액션: 더블 가드(Confirm → Reason 입력 → 실행), 롤백 가능성 안내.
- 빈번한 반복 작업: 프리셋 필터/저장된 뷰, 기본값(최근 검색) 자동 적용.

## 3) 인증/세션 UX
- SSO/Device Flow: 데스크톱+웹 혼합 환경에서 디바이스 코드 플로우로 인증, QR/코드 입력 UX.
- 토큰 수명/재발급: 액세스 짧게, 리프레시 길게. 인터셉터에서 재발급·로그아웃 처리.
- 세션 종료/잠금: 다중 세션 관리, 비활성/위험 IP에서는 추가 MFA.
- 로그인 감사: 로그인/실패 내역을 어드민에서 조회 가능하게 노출.

## 4) 데이터 품질/검증
- 다층 검증: 프론트 룰 + 서버 스키마 + 백오피스 훅(예: 중복 체크) → 동일한 에러 메시지 테이블 재사용.
- 에러 가이드라인: 코드/메시지/조치법을 표준화해 운영팀이 즉시 대응 가능하게.
- “위험 입력” 경고: 한도를 넘는 금액/권한 변경 시 추가 이유 입력 요구.

## 5) 배포·변경 안전장치
- 플래그/롤아웃: 어드민 기능을 트래픽 일부(예: 운영자 그룹)부터 롤아웃, 오류 시 즉시 롤백.
- 스모크 자동화: 로그인→검색/필터→배치 액션까지 최소 E2E 세트를 릴리스마다 실행.
- 리허설 환경: 프로덕션과 동일한 권한/데이터 스냅샷(마스킹)으로 운영팀이 사전 검증.

## 6) 관측·모니터링
- RUM: 페이지 로드·전환·에러율 추적, 어드민별 사용자 행동 로그(검색/액션)로 UX 개선 근거 확보.
- 백엔드: 슬로우 쿼리/오류 대시보드, 알림은 채널별(슬랙/문자)로 분리.
- 운영 헬스 패널: API 상태, 큐 적재량, 최근 실패 작업/감사 이벤트를 한 눈에 보여주는 패널.

## 7) 폼/설정 스키마화
- 설정을 JSON 스키마로 저장 → 동적 폼/필드 제어(권한별 readonly/hidden).
- 변경 이력 자동화: 스키마+값 스냅샷을 감사로그에 저장, 비교 diff 제공.
- 멀티테넌트 대비: 테넌트별 스키마 오버레이(기본값 + 테넌트 델타) 전략.

## 각 글에 넣을 수치/사례 아이디어
- 테이블 초기 로드·전환 시간 개선 %, 배포/롤백 리드타임, 오류율 감소, 반복 작업 시간 단축.
- RBAC/감사 적용 후 승인/변경 오류 감소 사례.
- 캐싱/프리패칭으로 리스트↔상세 전환 체감 속도 개선 수치.
